<merge xmlns:android="http://schemas.android.com/apk/res/android"
	xmlns:card_view="http://schemas.android.com/apk/res-auto"
	xmlns:app="http://schemas.android.com/apk/res-auto">

	<!-- extraneous but necessary for scrolling -->
	<FrameLayout
		android:layout_width="match_parent"
		android:layout_height="wrap_content"
		android:paddingTop="@dimen/scrollview_padding_top"
		>

		<android.support.v7.widget.CardView
			android:id="@+id/card_view"
			android:layout_gravity="center"
			android:layout_margin="10dp"
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:elevation="@dimen/card_radius"
			card_view:cardCornerRadius="@dimen/card_radius"
			card_view:cardElevation="@dimen/card_radius"
			card_view:cardPreventCornerOverlap="false"
			android:descendantFocusability="afterDescendants"
			>

			<RelativeLayout
				android:orientation="vertical"
				android:layout_width="match_parent"
				android:layout_height="match_parent">

				<!-- HEADER -->
				<FrameLayout
					android:id="@+id/header_container"
					android:layout_width="match_parent"
					android:layout_height="@dimen/playlist_card_image_height"
					android:layout_alignParentTop="true"
					android:layout_alignParentStart="true"
					>
					<!-- the shared element - cover image -->
					<ImageView
						android:id="@+id/playlist_image_background"
						android:scaleType="centerCrop"
						android:layout_width="match_parent"
						android:layout_height="@dimen/playlist_card_image_height"
						android:transitionName="@string/playlist_image_transition"
						/>

					<!-- fake opacity on the background image -->
					<View
						android:id="@+id/image_dim_overlay"
						android:visibility="gone"
						android:layout_width="match_parent"
						android:layout_height="@dimen/playlist_card_image_height"
						android:background="#000000"
						android:alpha=".4"
						/>

					<!-- overlay playlist title - bottom left -->
					<TextView
						android:id="@+id/playlist_title"
						android:fontFamily="@font/quicksand"
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:textAppearance="?android:attr/textAppearanceLarge"
						android:singleLine="true"
						android:paddingLeft="16dp"
						android:paddingBottom="16dp"
						android:textSize="@dimen/default_title_size"
						android:textColor="#ffffff"
						android:layout_gravity="bottom|start"
						/>
				</FrameLayout>

				<!-- FAB + menu container row -->
				<FrameLayout
					android:id="@+id/fab_container"
					android:layout_below="@id/header_container"
					android:layout_width="wrap_content"
					android:layout_height="wrap_content"
					android:layout_alignParentRight="true"
					android:layout_alignBaseline="@id/header_container"
					app:layout_anchorGravity="bottom|right|end"
					app:layout_anchor="@id/header_container"
					android:elevation="12dp"
					android:layout_marginRight="16dp"
					android:layout_marginTop="-28dp"
					android:layout_gravity="right"
					android:gravity="right"
					>

					<FrameLayout
						android:id="@+id/fab_button"
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:background="@drawable/fake_fab"
						android:layout_gravity="right"
						android:gravity="right"
						android:transitionName="@string/playlist_fab_transition"
						android:padding="8dp"
						>

						<ImageView
							android:id="@+id/fab"
							android:layout_width="30dp"
							android:layout_height="30dp"
							android:src="@drawable/note_happy_colored"
							/>

					</FrameLayout>

					<com.hlab.fabrevealmenu.view.FABRevealMenu
						android:id="@+id/fab_menu"
						android:layout_width="match_parent"
						android:layout_height="match_parent"
						android:minWidth="300dp"
						app:animateItems="true"
						app:menuBackgroundColor="@color/colorPrimary"
						app:menuDirection="left"
						app:menuRes="@menu/menu_playlist_card"
						app:menuTitleTextColor="@color/colorBlack"
						app:showOverlay="false"
						app:showTitle="true"
						app:menuSize="normal"
						app:menuTitleFontFamily="@font/indie_flower"
						app:menuTitleDisabledTextColor="@color/rosa"
						/>

				</FrameLayout>

				<!-- BODY -->
				<LinearLayout
					android:id="@+id/card_body"
					android:layout_below="@id/header_container"
					android:layout_width="match_parent"
					android:layout_height="wrap_content"
					android:textSize="@dimen/default_text_size"
					android:orientation="vertical"
					>

					<!-- BODY: likes/dislikes/total -->
					<LinearLayout
						android:id="@+id/quickstats_container"
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						android:orientation="horizontal"
						android:paddingTop="@dimen/stats_padding_vertical"
						android:paddingBottom="10dp"
						android:paddingLeft="@dimen/stats_padding_horizontal"
						android:paddingRight="@dimen/stats_padding_horizontal"
						>

						<LinearLayout
							android:layout_width="0dp"
							android:layout_weight="1"
							android:layout_height="wrap_content"
							android:gravity="center"
							android:orientation="vertical"
							>

							<com.cziyeli.songbits.base.LikeButton
								android:layout_width="@dimen/like_button_big"
								android:layout_height="@dimen/like_button_big" />

							<TextView
								android:id="@+id/quickstats_likes"
								android:text="13 likes"
								android:layout_marginTop="4dp"
								android:layout_gravity="center"
								android:layout_width="wrap_content"
								android:layout_height="wrap_content" />

						</LinearLayout>

						<View
							android:layout_width="2dp"
							android:layout_height="match_parent"
							android:background="@drawable/dotted_line_vertical" />

						<LinearLayout
							android:layout_width="0dp"
							android:layout_weight="1"
							android:layout_height="wrap_content"
							android:gravity="center"
							android:orientation="vertical"
							>

							<com.cziyeli.songbits.base.DisLikeButton
								android:layout_width="@dimen/dislike_button_big"
								android:layout_height="@dimen/dislike_button_big" />

							<TextView
								android:id="@+id/quickstats_dislikes"
								android:text="17 dislikes"
								android:layout_marginTop="4dp"
								android:layout_gravity="center"
								android:layout_width="wrap_content"
								android:layout_height="wrap_content" />

						</LinearLayout>

						<View
							android:layout_width="2dp"
							android:layout_height="match_parent"
							android:background="@drawable/dotted_line_vertical" />

						<LinearLayout
							android:layout_width="0dp"
							android:layout_weight="1"
							android:layout_height="wrap_content"
							android:gravity="center"
							android:orientation="vertical"
							>

							<ImageView
								android:src="@drawable/notes_hearts_colorful"
								android:layout_width="@dimen/dislike_button_big"
								android:layout_height="@dimen/dislike_button_big" />

							<TextView
								android:id="@+id/quickstats_total"
								android:text="55 total"
								android:layout_marginTop="4dp"
								android:layout_gravity="center"
								android:layout_width="wrap_content"
								android:layout_height="wrap_content" />

						</LinearLayout>

					</LinearLayout>

					<View
						android:layout_width="match_parent"
						android:layout_height="4dp"
						android:background="@drawable/dotted_line_horizontal"
						android:paddingLeft="@dimen/stats_padding_horizontal"
						android:paddingRight="@dimen/stats_padding_horizontal"
						/>

					<!-- BODY: audio stats -->
					<com.cziyeli.songbits.playlistcard.TrackStatsView
						android:id="@+id/stats_container"
						android:padding="20dp"
						android:orientation="vertical"
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						android:clickable="false"
						android:focusable="false"
						>
					</com.cziyeli.songbits.playlistcard.TrackStatsView>

					<!-- BODY: Expansion Header -->
					<com.github.florent37.expansionpanel.ExpansionHeader
						android:id="@+id/expansion_header"
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						app:expansion_headerIndicator="@id/headerIndicator"
						app:expansion_layout="@id/expansionLayout"
						app:expansion_toggleOnClick="true"
						>

						<RelativeLayout
							android:background="@color/colorPrimary"
							android:layout_height="48dp"
							android:layout_width="match_parent"
							android:paddingLeft="16dp"
							android:paddingRight="16dp">

							<TextView
								android:layout_centerVertical="true"
								android:layout_height="wrap_content"
								android:layout_width="wrap_content"
								android:text="expand tracks"
								android:fontFamily="@font/indie_flower"
								android:textColor="@color/colorWhite" />

							<android.support.v7.widget.AppCompatImageView
								android:adjustViewBounds="true"
								android:id="@+id/headerIndicator"
								android:layout_alignParentRight="true"
								android:layout_centerVertical="true"
								android:layout_height="wrap_content"
								android:layout_marginLeft="16dp"
								android:layout_width="wrap_content"
								app:srcCompat="@drawable/icon_expand_header" />
						</RelativeLayout>

					</com.github.florent37.expansionpanel.ExpansionHeader>

					<!-- BODY CONTENT: LIST of TRACKS (COLLAPSED) -->
					<com.github.florent37.expansionpanel.ExpansionLayout
						android:id="@+id/expansionLayout"
						android:textSize="@dimen/small_text_size"
						app:expansion_expanded="false"
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						android:descendantFocusability="afterDescendants"
						>
						<android.support.v7.widget.RecyclerView
							android:id="@+id/tracks_recycler_view"
							android:layout_width="match_parent"
							android:layout_height="wrap_content"
							/>
					</com.github.florent37.expansionpanel.ExpansionLayout>

				</LinearLayout> <!-- BODY END -->

			</RelativeLayout> <!-- CARD END -->

		</android.support.v7.widget.CardView>

	</FrameLayout>

</merge>